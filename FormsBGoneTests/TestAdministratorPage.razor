@attribute [TestClass]
@inherits BunitTestContext
@code
{
	[TestMethod]
	public void TestAdminPageView_Unauthenticated()
	{
		// Set up
		SetUpServices();

		// Act
		var cut = RenderComponent<AdministratorPage>();

		// Validate
		Assert.AreEqual(false, cut.Instance.Authorized);
	}

	[TestMethod]
	public void TestAdminPageView_Authorized()
	{
		// Set up
		SetUpServices();

		// Log in and Authorize
		var response = Services.GetService<IAccountService>()!.LoginAsync(new LoginDTO()
			{
				Username = "admin3",
				Password = "password"
			}).Result;
		var customAuthStateProvider = (CustomAuthenticationStateProvider)Services.GetService<AuthenticationStateProvider>()!;
		customAuthStateProvider.UpdateAuthenticationState(response.JWTToken);

		// Act
		var cut = RenderComponent<AdministratorPage>();

		// Validate
		Assert.AreEqual(true, cut.Instance.Authorized);

		// Logout
		customAuthStateProvider.Logout();
	}

	[TestMethod]
	public void TestAdminPageView_Authenticated_Unauthorized()
	{
		// Set up
		SetUpServices();

		// Log in and Authorize
		var response = Services.GetService<IAccountService>()!.LoginAsync(new LoginDTO()
			{
				Username = "dummy1",
				Password = "dummy!"
			}).Result;
		var customAuthStateProvider = (CustomAuthenticationStateProvider)Services.GetService<AuthenticationStateProvider>()!;
		customAuthStateProvider.UpdateAuthenticationState(response.JWTToken);

		// Act
		var cut = RenderComponent<AdministratorPage>();

		// Validate
		Assert.AreEqual(false, cut.Instance.Authorized);

		// Logout
		customAuthStateProvider.Logout();
	}


}